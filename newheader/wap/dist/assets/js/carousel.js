var Mobify=window.Mobify=window.Mobify||{};Mobify.$=Mobify.$||window.Zepto||window.jQuery,Mobify.UI=Mobify.UI||{classPrefix:"m-"},function(t,e){t.support=t.support||{},t.extend(t.support,{touch:"ontouchend"in e})}(Mobify.$,document),Mobify.UI.Utils=function(t){var e={},i=t.support;e.events=i.touch?{down:"touchstart",move:"touchmove",up:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup"},e.getCursorPosition=i.touch?function(t){return t=t.originalEvent||t,{x:t.touches[0].clientX,y:t.touches[0].clientY}}:function(t){return{x:t.clientX,y:t.clientY}},e.getProperty=function(t){for(var e=["Webkit","Moz","O","ms",""],i=document.createElement("div").style,n=0;n<e.length;++n)if(void 0!==i[e[n]+t])return e[n]+t},t.extend(i,{transform:!!e.getProperty("Transform"),transform3d:!!(window.WebKitCSSMatrix&&"m11"in new WebKitCSSMatrix)});var n=e.getProperty("Transform");i.transform3d?e.translateX=function(t,e){"number"==typeof e&&(e+="px"),t.style[n]="translate3d("+e+",0,0)"}:i.transform?e.translateX=function(t,e){"number"==typeof e&&(e+="px"),t.style[n]="translate("+e+",0)"}:e.translateX=function(t,e){"number"==typeof e&&(e+="px"),t.style.left=e};var s=(e.getProperty("Transition"),e.getProperty("TransitionDuration"));return e.setTransitions=function(t,e){t.style[s]=e?"":"0s"},e.requestAnimationFrame=function(){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};return function(){t.apply(window,arguments)}}(),e}(Mobify.$),Mobify.UI.Carousel=function(t,e){var i={dragRadius:10,moveRadius:20,classPrefix:void 0,classNames:{outer:"carousel",inner:"carousel-inner",item:"item",center:"center",touch:"has-touch",dragging:"dragging",active:"active"}},n=t.support,s=function(t,e){this.setOptions(e),this.initElements(t),this.initOffsets(),this.initAnimation(),this.bind()};return s.defaults=i,s.prototype.setOptions=function(e){var n=this.options||t.extend({},i,e);n.classNames=t.extend({},n.classNames,e.classNames||{}),n.classPrefix=n.classPrefix||Mobify.UI.classPrefix,this.options=n},s.prototype.initElements=function(e){this._index=1,this.element=e,this.$element=t(e),this.$inner=this.$element.find("."+this._getClass("inner")),this.$items=this.$inner.children(),this.$start=this.$items.eq(0),this.$sec=this.$items.eq(1),this.$current=this.$items.eq(this._index),this._length=this.$items.length,this._alignment=this.$element.hasClass(this._getClass("center"))?.5:0},s.prototype.initOffsets=function(){this._offset=0,this._offsetDrag=0},s.prototype.initAnimation=function(){this.animating=!1,this.dragging=!1,this._needsUpdate=!1,this._enableAnimation()},s.prototype._getClass=function(t){return this.options.classPrefix+this.options.classNames[t]},s.prototype._enableAnimation=function(){this.animating||(e.setTransitions(this.$inner[0],!0),this.$inner.removeClass(this._getClass("dragging")),this.animating=!0)},s.prototype._disableAnimation=function(){this.animating&&(e.setTransitions(this.$inner[0],!1),this.$inner.addClass(this._getClass("dragging")),this.animating=!1)},s.prototype.update=function(){if(!this._needsUpdate){var t=this;this._needsUpdate=!0,e.requestAnimationFrame(function(){t._update()})}},s.prototype._update=function(){if(this._needsUpdate){var t=Math.round(this._offset+this._offsetDrag);e.translateX(this.$inner[0],t),this._needsUpdate=!1}},s.prototype.bind=function(){function i(t){n.touch||t.preventDefault(),d=!0,c=!1,a=e.getCursorPosition(t),u=0,l=0,f=!1,p._disableAnimation(),$=1==p._index,b=p._index==p._length}function s(t){if(d&&!c){var i=e.getCursorPosition(t);u=a.x-i.x,l=a.y-i.y,f||h(u)>h(l)&&h(u)>m?(f=!0,t.preventDefault(),$&&u<0?u=u*-_/(u-_):b&&u>0&&(u=u*_/(u+_)),p._offsetDrag=-u,p.update()):h(l)>h(u)&&h(l)>m&&(c=!0)}}function o(t){d&&(d=!1,p._enableAnimation(),!c&&h(u)>v.moveRadius?u>0?p.next():p.prev():(p._offsetDrag=0,p.update()))}function r(t){f&&t.preventDefault()}var a,u,l,f,h=Math.abs,d=!1,c=!1,m=this.options.dragRadius,p=this,g=this.$element,y=this.$inner,v=this.options,_=this.$element.width(),$=!1,b=!1;y.on(e.events.down+".carousel",i).on(e.events.move+".carousel",s).on(e.events.up+".carousel",o).on("click.carousel",r).on("mouseout.carousel",o),g.on("click","[data-slide]",function(e){e.preventDefault();var i=t(this).attr("data-slide"),n=parseInt(i,10);isNaN(n)?p[i]():p.move(n)}),g.on("afterSlide",function(t,e,i){p.$items.eq(e-1).removeClass(p._getClass("active")),p.$items.eq(i-1).addClass(p._getClass("active")),p.$element.find("[data-slide='"+e+"']").removeClass(p._getClass("active")),p.$element.find("[data-slide='"+i+"']").addClass(p._getClass("active"))}),g.trigger("beforeSlide",[1,1]),g.trigger("afterSlide",[1,1]),p.update()},s.prototype.unbind=function(){this.$inner.off()},s.prototype.destroy=function(){this.unbind(),this.$element.trigger("destroy"),this.$element.remove(),this.$element=null,this.$inner=null,this.$start=null,this.$current=null},s.prototype.move=function(t,e){var i=this.$element,n=(this.$inner,this.$items),s=this.$start,o=this.$current,r=this._length,a=this._index;e=e||{},t<1?t=1:t>this._length&&(t=r),this._index,i.trigger("beforeSlide",[a,t]),this.$current=o=n.eq(t-1);var u=o.prop("offsetLeft")+o.prop("clientWidth")*this._alignment,l=s.prop("offsetLeft")+s.prop("clientWidth")*this._alignment,f=-(u-l);this._offset=f,this._offsetDrag=0,this._index=t,this.update(),i.trigger("afterSlide",[a,t])},s.prototype.next=function(){this.move(this._index+1)},s.prototype.prev=function(){this.move(this._index-1)},s}(Mobify.$,Mobify.UI.Utils),function(t){t.fn.carousel=function(e,i){var n=t.extend({},t.fn.carousel.defaults);return"object"==typeof e&&(n=t(n,e),i=null,e=null),this.each(function(){var s=(t(this),this._carousel);s||(s=new Mobify.UI.Carousel(this,n)),e&&(s[e](i),"destroy"===e&&(s=null)),this._carousel=s}),this},t.fn.carousel.defaults={}}(Mobify.$);